<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Embracing Diversity: Searching over multiple languages</title>

    <meta name="description" content="Embracing Diversity: Searching over multiple languages">
    <meta name="author" content="Jeff Zemerick; Suneel Marthi">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/bbuzz17.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
    <!--[if lt IE 9]> <script src="lib/js/html5shiv.js"></script> <![endif]-->
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-background-image="img/ZsMwlm2.jpg">
          <br/>
          <br/>
          <br/>
          <h3>Embracing Diversity: Searching over multiple languages</h3>
          <br/>
          <p>Suneel Marthi<br/>
             Jeff Zemerick
          </p>
          <p style="font-size: 60%">October 17, 2018<br/>
             Activate Conference, Montreal</p>
        </section>
				<section data-background-image="img/ZsMwlm2.jpg">
          <h3>$WhoAreWe</h3>
          <h6 style="text-align: left; font-size: 80%;">Suneel Marthi <br/><span style="font-size: 60%"><i class="fa fa-twitter" aria-hidden="true"></i> @suneelmarthi</span></h6>
          <ul style="font-size: 70%; display: inline">
            <li>Member of Apache Software Foundation</li>
            <li>Committer and PMC on Apache Mahout, Apache OpenNLP, Apache Streams</li>
          </ul>
					<br/>
					<br/>
					<h6 style="text-align: left; font-size: 80%;">Jeff Zemerick <br/><span style="font-size: 60%"><i class="fa fa-twitter" aria-hidden="true"></i> @jzonthemtn</span></h6>
					<ul style="font-size: 70%; display: inline">
						<li>Software Engineer and Cloud Architect</li>
						<li>Committer and PMC on Apache OpenNLP</li>
					</ul>
        </section>
        <section data-background-image="img/ZsMwlm2.jpg">
          <h3>Agenda</h3>
          <ul>
            <li>What is Multi-Lingual Search?</li>
            <li>Why Multi-Lingual Search?</li>
            <li>What is Neural Machine Translation?</li>
            <li>Introduce a Multi-Lingual Pipeline</li>
          </ul>
        </section>
        <section data-background-image="img/ZsMwlm2-blueish.jpg">
          <h3>What is Multi-Lingual Search ?</h3>
        </section>
        <section data-background-image="img/ZsMwlm2-blueish.jpg">
          <ul>
            <li>Searching</li>
            <ul>
              <li>over content written in different languages</li>
              <li>with users speaking different languages</li>
              <li>both</li>
            </ul>
            <li>Parallel corpora</li>
            <li>Translating queries</li>
            <li>Translating documents</li>
          </ul>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h3>Why Multi-Lingual Search ?</h3>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h3>Embracing diversity</h3>
          <ul>
            <li>Most online tech content is in English</li>
            <ul>
              <li>Wikipedia dumps:</li>
              <ul>
                <li>en: 62GB</li>
                <li>de: 17GB</li>
                <li>it:&nbsp;&nbsp;&nbsp;10GB</li>
              </ul>
            </ul>
            <li>Good number of non-English speaking users</li>
            <li>A lot of search queries are composed in English</li>
            <li>Preferable to retrieve search results in native language</li>
            <li>&hellip; or even to consolidate all results in one language</li>
          </ul>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h3>Use-case 1 &mdash; tech domain, native first</h3>
          <img src="img/uc1.png" style="max-width: 75%; border: none; background: none;box-shadow: none; "/>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h3>Use-case 2 &mdash; native only ?</h3>
          <img src="img/uc2.png" style="border: none; background: none;box-shadow: none; "/>
        </section>

        <section data-background-image="img/ZsMwlm2-purpleish.jpg">
            <h3>Neural Machine Translation</h3>
        </section>
        <section data-background-image="img/ZsMwlm2-purpleish.jpg">
					<h3>Neural Machine Translation (NMT)</h3>
          <p style="text-align: left">Generate Translations from Neural Network models trained on Bilingual Corpora.</p>
          <p style="text-align: left">Translation happens per a probability distribution one word at time (no phrases).</p>
          <div style="background: #c9c9c9;">
            <img src="img/softmax.png" style="margin: 0px, 20px, 0px, 20px; border: none; background: none;box-shadow: none; "/><br/>
            <img src="img/cross_entropy.png" style="margin: 0px, 20px, 0px, 20px; border: none; background: none;box-shadow: none; "/>
          </div>
       </section>
        <section data-background-image="img/ZsMwlm2-purpleish.jpg">
          <p style="text-align: left">NMT is deep learning applied to machine translation.</p>
          <img src="img/transformer.png" style="max-width: 25%; margin: 0px, 20px, 0px, 20px; border: none; background: none;box-shadow: none; "/>
          <p style="font-size: 35%;">"Attention Is All You Need" - Ashish Vaswani, Noam Shazeer, Niki Parmar, Jakob Uszkoreit, Llion Jones, Aidan N. Gomez, Lukasz Kaiser, Illia Polosukhin <br/> Google Brain https://arxiv.org/abs/1706.03762</p>
        </section>

				<section data-background-image="img/ZsMwlm2-yellowish.jpg">
          <h3>NMT versus SMT at Scale</h3>
          <div style="font-size: 85%;">
            <table style="color: #ffffff">
              <tr>
								<th>Sockeye (NMT)</th>
                <th>Apache Joshua (SMT)</th>
              </tr>
              <tr>
								<td><span style="color: lightgreen">High Quality Translations</span></td>
                <td>Reasonable Quality Translation</td>
              </tr>
              <tr>
								<td>Python 3 / C++</td>
                <td>Java / C++</td>
              </tr>
              <tr>
								<td><span style="color: lightgreen">Model size ~256 MB</span></td>
                <td>Model size 60GB-120GB</td>
              </tr>
              <tr>
								<td><span style="color: lightgreen">Simple Training Process</span></td>
                <td>Complicated Training Process</td>
              </tr>
              <tr>
								<td><span style="color: lightgreen">400 lines of code</span></td>
                <td>Relatively complex implementation</td>
              </tr>
              <tr>
								<td>High translation costs</td>
                <td><span style="color: lightgreen">Low translation costs</span></td>
              </tr>
            </table>
          </div>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h3>NMT Samples</h3>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <p>Jetzt LIVE: Abgeordnete debattieren über Zuspitzung des Syrien-Konflikts.</p>
          <p style="color: lightgreen">last but not least, Members are debating the escalation of the Syrian conflict.</p>
        </section>
				<section data-background-image="img/ZsMwlm2-redish.jpg">
          <p>Sie haben wenig Zeit, wollen aber Fett verbrennen und Muskeln aufbauen?</p>
          <p style="color: lightgreen">You have little time, but want to burn fat and build muscles?</p>
        </section>
				<section data-background-image="img/ZsMwlm2-redish.jpg">
          <h3>NMT Challenges – Input</h3>
          <ul>
            <li>The input into all neural network models is always a vector.</li>
            <li>Training data is always parallel text.</li>
            <li>How do you represent a word from the text as a vector?</li>
          </ul>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h3>Embedding Layer</h3>
          <img src="img/vocab_first.png" style="max-width: 100%; border: none; background: none;box-shadow: none; "/>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <img src="img/vocab_learned.png" style="max-width: 100%; border: none; background: none;box-shadow: none; "/>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h3>NMT Challenges – Rare Words</h3>
          <p>Ok,  we can now represent 30,000 words as vectors, what about unseen words?</p>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h3>NMT Challenges – Byte Pair Encoding (BPE)</h3>
          <img src="img/bpe.png" style="max-width: 65%; border: none; background: none;box-shadow: none; "/>
          <p style="font-size: 35%;">Rico Sennrich, Barry Haddow and Alexandra Birch (2016): Neural Machine Translation of Rare Words with Subword Units Proceedings of the 54th Annual Meeting of the Association for Computational Linguistics (ACL 2016). Berlin, Germany.</p>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h4>Byte Pair Encoding</h4>
          "positional addition contextual"
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h4>Byte Pair Encoding</h4>
          "posi<span style="color: red">X</span>onal addi<span style="color: red">X</span>on contextual"<br/>
          ti = <span style="color: red">X</span>
        </section>
				<section data-background-image="img/ZsMwlm2-redish.jpg">
          <h4>Byte Pair Encoding</h4>
          "posi<span style="color: red">X</span>on<span style="color: blue">Y</span> addi<span style="color: red">X</span>on contextu<span style="color: blue">Y</span>"<br/>
          ti = <span style="color: red">X</span><br/>
          al = <span style="color: blue">Y</span>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h4>Byte Pair Encoding</h4>
          "posi<span style="color: yellow">Z</span>n<span style="color: blue">Y</span> addi<span style="color: yellow">Z</span>n contextu<span style="color: blue">Y</span>"<br/>
          ti = <span style="color: red">X</span><br/>
          al = <span style="color: blue">Y</span><br/>
          <span style="color: red">X</span>o = <span style="color: yellow">Z</span>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h4>Byte Pair Encoding</h4>
          these<br/>
          ing<br/>
          other<br/>
          s,<br/>
          must<br/>
          Member
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h3>NMT Challenges – Jagged Tensors</h3>
          <p>Input is not sorted by length.</p>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h3>Jagged Tensors cont.</h3>
          <img src="img/jagged.png" style="max-width: 80%; border: none; background: none;box-shadow: none; "/>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h3>Jagged Tensors cont.</h3>
          <img src="img/sorted.png" style="max-width: 80%; border: none; background: none;box-shadow: none; "/>
        </section>
        <section data-background-image="img/ZsMwlm2-redish.jpg">
          <h3>Jagged Tensors cont.</h3>
          <img src="img/batch.png" style="max-width: 80%; border: none; background: none;box-shadow: none; "/>
        </section>
				<section data-background-image="img/ZsMwlm2-redish.jpg">
           <h3>NMT Challenges – Cost</h3>
           <ul>
             <li>Step 1: Create great profiling tools, measurement.</li>
             <li>Step 2: Get specialists to optimize bottlenecks. </li>
             <li>Step 3: ???</li>
             <li>Step 4: Profit.</li>
           </ul><br/><br/>

           <span style="font-size: 50%;">New layer norm, top-k, batch-mul, transpose, smoothing op.  3.5x speedup so far.  Working in branches:</span><br/>
           <span style="font-size: 50%;"><i class="fa fa-github" aria-hidden="true"></i> https://github.com/MXNetEdge/sockeye/tree/dev_speed</span><br/>
           <span style="font-size: 50%;"><i class="fa fa-github" aria-hidden="true"></i> https://github.com/MXNetEdge/incubator-mxnet/tree/dev_speed</span><br/>
         </section>

         <section data-background-image="img/ZsMwlm2-redish.jpg">
           <h3>TVM</h3>
             <p style="font-size: 75%;">TVM is a Tensor intermediate representation(IR) stack for deep learning systems. It is designed to close the gap between the productivity-focused deep learning frameworks, and the performance- and efficiency-focused hardware backends. TVM works with deep learning frameworks to provide end to end compilation to different backends. </p>
             <p style="font-size: 50%;"><i class="fa fa-github" aria-hidden="true"></i> https://github.com/dmlc/tvm</p>
         </section>
         <section data-background-image="img/ZsMwlm2-redish.jpg">
           <h3>Alibaba TVM Optimization</h3>
             <img src="img/transformer.png" style="width: 300px; border: none; background: none;box-shadow: none; "/>
             <p style="font-size: 50%;">http://tvmlang.org/2018/03/23/nmt-transformer-optimize.html</p>
         </section>
         <section data-background-image="img/ZsMwlm2-redish.jpg">
           <h3>Alibaba TVM Optimization</h3>
             <img src="img/tvm_speedup.png" style="width: 400px; border: none; background: none;box-shadow: none; "/>
         </section>
         <section data-background-image="img/ZsMwlm2-redish.jpg">
           <h3>Facebook - Tensor Comprehensions</h3><br/>
           <img src="img/tc_evol_slower.gif" style="width: 400px; border: none; background: none;box-shadow: none; "/><br/>
           <p style="font-size: 50%;">https://research.fb.com/announcing-tensor-comprehensions/</p>
         </section>

				 <section data-background-image="img/ZsMwlm2-redish.jpg">
					 <h3>Document Summarization</h3>
					 <table style="color: #ffffff">
						 <tr>
							 <th>Extractive</th>
							 <th>Abstractive</th>
						 </tr>
						 <tr>
							 <td>Original Content</td>
							 <td>New Content</td>
						 </tr>
						 <tr>
							 <td>Easier</td>
							 <td>More Difficult</td>
						 </tr>
					 </table>
					 <p>Summarizing results on-the-fly gives flexibility.</p>
				 </section>

				 <section data-background-image="img/ZsMwlm2-yellowish.jpg">
 					<h3>Multilingual Search Pipeline</h3>
					 <p>Accepts English text, translates it, searches, translates and summarizes search results.</p>
           <ul style="font-size: 80%;">
             <li>Apache NiFi</li>
						 <li>Apache OpenNLP</li>
             <li>Sockeye</li>
             <li>Solr</li>
						 <li>"Get To The Point: Summarization with Pointer-Generator Networks"</li>
           </ul>
         </section>
				 <section data-background-image="img/ZsMwlm2-yellowish.jpg">
					 <h3>Apache NiFi</h3>
					 <ul style="font-size: 80%;">
						 <li>Data flow orchestration</li>
						 <li>Able to ingest and manipulate data using processors</li>
						 <li>Organized into <i>flows</i></li>
						 <li>Out-of-the-box QuerySolr processor</li>
						 <ul>
							 <li>Executes a query against a Solr instance</li>
							 <li>Results returned as XML</li>
						 </ul>
						 <li><i class="fa fa-github" aria-hidden="true"></i> NiFi: <a href="https://nifi.apache.org/">https://nifi.apache.org/</a></li>
						 <li><i class="fa fa-github" aria-hidden="true"></i> Code for the pipeline: https://github.com/jzonthemtn/multilanguage-search</li>
					 </ul>
				 </section>
				 <section data-background-image="img/ZsMwlm2-yellowish.jpg">
					 <h3>Apache OpenNLP</h3>
					 <ul style="font-size: 80%;">
						 <li>Library of common NLP tools</li>
						 <li>Our pipeline uses:</li>
						 <ul>
							 <li>Language detection</li>
							 <li>Sentence extraction</li>
							 <li>Tokenization</li>
                             <li>Byte-Pair Encoding (BPE)</li>
						 </ul>
						 <li><i class="fa fa-github" aria-hidden="true"></i> <a href="https://opennlp.apache.org">https://opennlp.apache.org</a></li>
					 </ul>
				 </section>

				 <section data-background-image="img/ZsMwlm2-yellowish.jpg">
 					<h3>Sockeye</h3>
           <ul style="font-size: 80%;">
             <li>Neural Machine Translation tool</li>
             <li>Written in Python and based on MXNet</li>
             <li>Sequence-to-sequence framework that supports:</li>
 						<ul>
               <li>Deep Recurrent Neural Networks with Attention</li>
               <li>Transformer Models with self-attention</li>
               <li>Fully convolutional sequence-to-sequence models</li>
 					  </ul>
             <li><i class="fa fa-github" aria-hidden="true"></i> <a href="https://github.com/awslabs/sockeye">https://github.com/awslabs/sockeye</a></li>
           </ul>
         </section>
				 <section data-background-image="img/ZsMwlm2-yellowish.jpg">
 					<h3>Solr</h3>
					<p>Indexed plain text news articles:</p>
 					<ul style="font-size: 80%;">
 						<li>~100,000 English news articles</li>
 						<li>~30,000 German news articles</li>
 					</ul>
 				</section>
				<section data-background-image="img/ZsMwlm2-yellowish.jpg">
				 <h3>Pointer-Generator Networks</h3>
				 <ul style="font-size: 80%;">
					 <li>Performs abstractive summarization of search results</li>
					 <li>Built on Tensorflow</li>
					 <li>Abigail See, Peter J. Liu, Christopher D. Manning</li>
					 <li><i class="fa fa-github" aria-hidden="true"></i> <a href="https://github.com/abisee/pointer-generator">https://github.com/abisee/pointer-generator</a></li>
				 </ul>
			 </section>
				<section data-background-image="img/ZsMwlm2-yellowish.jpg">
						<h4>NiFi Flow</h4>
						<img src="img/nifi-flow.png" style="max-width: 85%; border: none; box-shadow: none; background: none; align: center"/>
				</section>
				<section data-background-image="img/ZsMwlm2.jpg">
					<h2>The Code and NiFi Flow</h2>
					<ul>
						<li><a href="https://github.com/jzonthemtn/multilanguage-search">https://github.com/jzonthemtn/multilanguage-search</a></li>
					</ul>
				</section>
                <section data-background-image="img/ZsMwlm2-blueish.jpg">
                    <h3>Credits</h3>
                    <ul>
                        <li>Tommaso Teofili (Adobe - Rome)</li>
                        <li>Joern Kottmann, Bruno Kinoshita (Apache OpenNLP)</li>
                        <li>Kellen Sunderland, Sockeye Team (Amazon - Berlin)</li>
                    </ul>
                </section>
        <section data-background-image="img/ZsMwlm2.jpg">
          <h2>Questions?</h2>
        </section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
        controls: false,
        progress: true,
        history: true,
        center: true,
        slideNumber: true,
        transition: 'slide', // none/fade/slide/convex/concave/zoom
        keyboard: true,
        touch: true,
        loop: false,
        fragments: true,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
